<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>منصة درع الابتكار لتجمع الطائف</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  margin: 0;
  background-color: #f5f5f7;
  color: #1d1d1f;
}
header {
  background: #f5f5f7;
  padding: 1rem 2rem;
  border-bottom: 1px solid #e5e5e5;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
nav {
  display: flex;
  gap: 1rem;
}
nav a {
  text-decoration: none;
  color: #0071e3;
  font-weight: 500;
}
nav a:hover {
  text-decoration: underline;
}
main {
  padding: 2rem;
}
section {
  margin-bottom: 2rem;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  padding: 1rem;
}
h1, h2 {
  margin-top: 0;
}
form input, form textarea, form button {
  width: 100%;
  max-width: 500px;
  margin-bottom: 0.5rem;
  padding: 0.5rem;
  border: 1px solid #dcdcdc;
  border-radius: 8px;
  font-size: 1rem;
}
form button {
  background-color: #0071e3;
  color: white;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease;
}
form button:hover {
  background-color: #005bb5;
}
.board {
  display: flex;
  overflow-x: auto;
  gap: 1rem;
}
.column {
  background: #f2f2f2;
  border-radius: 12px;
  padding: 0.5rem;
  min-width: 220px;
  flex: 1;
}
.column h3 {
  margin-top: 0;
  font-size: 1rem;
  padding: 0.5rem;
  background: #e5e5ea;
  border-radius: 8px;
}
.card {
  background: white;
  margin: 0.5rem 0;
  padding: 0.5rem;
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  cursor: grab;
}
.dashboard {
  font-weight: 500;
}
</style>
</head>
<body>
<header>
  <h1>منصة درع الابتكار لتجمع الطائف</h1>
  <p>اجمع، قيّم، واعتمد الأفكار ثم تابع تنفيذها عبر لوحة كانبان تفاعلية.</p>
  <nav>
    <a href="index.html">الرئيسية</a>
    <a href="judges.html">لوحة المحكمين</a>
    <a href="executive.html">لوحة القيادة</a>
    <a href="personal.html">صفحتي</a>
  </nav>
</header>
<main>
  <section>
    <h2>إرسال فكرة جديدة</h2>
    <form id="ideaForm">
      <input type="text" id="ideaTitle" placeholder="عنوان الفكرة" required>
      <input type="text" id="ideaOwner" placeholder="اسم المبتكر" required>
      <textarea id="ideaDesc" rows="3" placeholder="وصف الفكرة" required></textarea>
      <button type="submit">إضافة الفكرة</button>
    </form>
  </section>
  <section class="dashboard">
    <h2>لوحة المؤشرات</h2>
    <p id="stats"></p>
  </section>
  <section>
    <h2>خريطة الابتكار (كانبان)</h2>
    <div class="board" id="board">
      <div class="column" data-status="submitted">
        <h3>أفكار مقدمة</h3>
      </div>
      <div class="column" data-status="review">
        <h3>قيد التقييم</h3>
      </div>
      <div class="column" data-status="approved">
        <h3>معتمدة</h3>
      </div>
      <div class="column" data-status="inprogress">
        <h3>قيد التنفيذ</h3>
      </div>
      <div class="column" data-status="completed">
        <h3>منجزة</h3>
      </div>
    </div>
  </section>
</main>
<script>
let ideas = JSON.parse(localStorage.getItem('ideas') || '[]');
function updateBoard() {
  document.querySelectorAll('.column').forEach(col => {
    [...col.querySelectorAll('.card')].forEach(card => card.remove());
  });
  ideas.forEach((idea, idx) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.draggable = true;
    card.dataset.index = idx;
    card.innerHTML = '<strong>' + idea.title + '</strong><br>' + idea.owner;
    card.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', idx);
    });
    const col = document.querySelector('.column[data-status="' + idea.status + '"]');
    if (col) col.appendChild(card);
  });
  updateStats();
}
function updateStats() {
  const counts = {submitted:0, review:0, approved:0, inprogress:0, completed:0};
  ideas.forEach(idea => counts[idea.status]++);
  document.getElementById('stats').textContent =
    'مقدمة: ' + counts.submitted +
    ' | قيد التقييم: ' + counts.review +
    ' | معتمدة: ' + counts.approved +
    ' | قيد التنفيذ: ' + counts.inprogress +
    ' | منجزة: ' + counts.completed;
}
document.getElementById('ideaForm').addEventListener('submit', function(e){
  e.preventDefault();
  const title = document.getElementById('ideaTitle').value.trim();
  const owner = document.getElementById('ideaOwner').value.trim();
  const desc = document.getElementById('ideaDesc').value.trim();
  if (title && owner && desc){
    ideas.push({title, owner, desc, status:'submitted'});
    localStorage.setItem('ideas', JSON.stringify(ideas));
    this.reset();
    updateBoard();
  }
});
document.querySelectorAll('.column').forEach(column => {
  column.addEventListener('dragover', e => {
    e.preventDefault();
  });
  column.addEventListener('drop', e => {
    const idx = e.dataTransfer.getData('text/plain');
    ideas[idx].status = column.dataset.status;
    localStorage.setItem('ideas', JSON.stringify(ideas));
    updateBoard();
  });
});
updateBoard();
</script>
</body>
</html>
